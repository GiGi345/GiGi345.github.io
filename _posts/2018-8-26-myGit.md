---
layout: post
title: 我和git的爱恨情仇
category : 小q的成长经历
tags : [小q的成长经历, git]
stickie: true
---

## 前言
作为分布式版本管理系统，git给开发过程带来了很多便利，但对于新手来说，一不小心就会闯下大错o(╯□╰)o，这边记录下我的三次囧事，希望看到我这条博客的同志们引以为戒，都是血淋漓的教训

## 第一囧

第一次使用git闯祸是在南京烽火实习的时候，那个时候没有使用git正式参与过项目，只是稍微了解了git的一些简单的知识。那一天，小组通知开会，leader让我们把完成的内容提交一下，大家开会的时候看一下，而我，怎么也push不上去（因为没有在git上ssh里配置本地公钥，但是当时的我不知道），开会迫在眉睫，我赶紧找旁边的实习生帮我看一下，并让他帮我提交一下，我先去开会。

悲惨的事情就这么发生了...

因为只接收到我让帮忙push一下的信号，并且急于在小组review我的代码之前push，他就帮我强制push了，因为我没有更新代码，于是华丽丽的把别人的代码覆盖了。

小组规定：覆盖别人代码造成重大事故者，请组内成员喝饮料或者给组内买本书，于是大家都知道了这个新来的实习生覆盖了代码o(╯□╰)o 而我，也知道了强制push 这个命令，为第三囧埋下了伏笔

## 第二囧

在IBM都是有严格的review机制的，大家在各自的branch开发，完成后提交PR,拉两个reviewer，reviewer同意之后，并且Travis跑过之后才可以merge到master，囧事的场景是这样的，我提了一个PR，跑过travis之后，我就拉了两个同事review，而他们review之后，没有merge到master，我也没有merge，到了下一周，我review其中一位同事的代码时，发现她是在我之前的旧版本上修改的，我新提交的代码并没有更新，于是我就跟她说我上周提交的代码没有merge，她看了一眼，确实，并且告诉我不是必须reviewer可以merge，只要reviewer同意后，自己也可以merge，于是点了merge，成功将我的代码merge到了master上，而这一点就出了重大事故...

我们每个story是单独建一个分支的，那个story的分支提了PR后，我就一直没有管它了，也没有更新。因为我做的是function test，所以每个人提交代码时，必须跑过我的function test才可以merge到master，而这一周以来项目已经改了好多细微的feature，我的function test 也早已经过时了，所以这个过时的function test提交了之后，下面所有人都跑不过travis了。

## 第三囧
昨天晚上十二点，我在欣赏我的个人主页的时候，发现有个地方要修改，于是直接嗖嗖嗖在自己笔记本上改完提交，push的时候出了问题（内心os：怎么会冲突，我的github还有其他人提交不成？）

`git push -f ` 强制push

￣□￣｜｜ 呃呃呃，这是什么时候的代码，我的代码呢，糟糕，push错了

`git reset --hard HEAD^` 回退

￣□￣｜｜ 呃呃呃，这又是什么时候的代码，我的最新的代码呢

就这样不断的回退，我怎么也找不到我最新的代码了...

正在看的你知道为什么吗？

因为除了第一次连接远程库的时候，我用的是我自己的破笔记本开发的，之后我都是使用公司mac进行开发，而昨天晚上我没有更新代码就强制提交了，mac上辛辛苦苦开发的内容毁于一旦，我不管怎么回退我本地的版本库就是没有新的啊...

你肯定会说，在mac上把强制push不就行了，可是...我已经离职了，积累了我心血的mac早已经归还了...

这个故事告诉我们大晚上不要轻易做任何决定...

## 心得
这三个小故事告诉我们，每天开发之前 pull,提交之前 pull，merge之前 pull，pull pull pull...

还有自己开发的内容自己来搞，不会可以请教别人知识点，人家也不是很了解你的东西，全权委托给别人是不负责的行为o(╯□╰)o

还有自己写的代码，要自己负责，在merge进master之前，要时刻监督...

希望以后不是马大q...    o(╯□╰)o